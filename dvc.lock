schema: '2.0'
stages:
  validate:
    cmd: python src/validate_data.py
    deps:
    - path: data/raw/dataset.csv
      hash: md5
      md5: 5e8e741c686c07b30b481f0c7fc6deaa
      size: 191507
    - path: src/validate_data.py
      hash: md5
      md5: 83a47b25574f3c7ccb5840214a380498
      size: 2810
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/dataset.csv
      hash: md5
      md5: 5e8e741c686c07b30b481f0c7fc6deaa
      size: 191507
    - path: src/preprocess.py
      hash: md5
      md5: a619f0a6f8a514f4445e241884742825
      size: 1029
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: c112f555740fa3bda3a3559ae194ccc9
      size: 38370
    - path: data/processed/train.csv
      hash: md5
      md5: afbdd9ff31194f5a2159f24c2f6cf4e5
      size: 153234
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: afbdd9ff31194f5a2159f24c2f6cf4e5
      size: 153234
    - path: src/train.py
      hash: md5
      md5: 889e975e08ca52760e31b412c1151183
      size: 3340
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 43e26aa1bd45d7fd3cdcbbd6bec3aee6
      size: 353947
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: c112f555740fa3bda3a3559ae194ccc9
      size: 38370
    - path: src/evaluate.py
      hash: md5
      md5: a8167a67a9d79c0d32fa871501f33b06
      size: 1784
    outs:
    - path: metrics/metrics.json
      hash: md5
      md5: 60184a774c0f48f331605718df3f419c
      size: 97
  generate:
    cmd: python src/generate_data.py --n 5000 --seed 42
    deps:
    - path: src/generate_data.py
      hash: md5
      md5: 096eb2404f0d63673b9564f370c41d4d
      size: 2728
    outs:
    - path: data/raw/dataset.csv
      hash: md5
      md5: 5e8e741c686c07b30b481f0c7fc6deaa
      size: 191507
  monitor:
    cmd: python src/monitor_drift.py --reference data/processed/train.csv 
      --current data/processed/test.csv --model-path models/model.joblib 
      --out-dir reports
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: c112f555740fa3bda3a3559ae194ccc9
      size: 38370
    - path: data/processed/train.csv
      hash: md5
      md5: afbdd9ff31194f5a2159f24c2f6cf4e5
      size: 153234
    - path: models/model.joblib
      hash: md5
      md5: 43e26aa1bd45d7fd3cdcbbd6bec3aee6
      size: 353947
    - path: src/monitor_drift.py
      hash: md5
      md5: bc64104d8114e4e24cfebba8ed2a27ec
      size: 10176
    outs:
    - path: reports/data_drift_evidently.html
      hash: md5
      md5: dfbdd2fe36ae057965d603d577c50ae1
      size: 667
    - path: reports/drift_metrics.json
      hash: md5
      md5: 654fb07cc76bc64b9bd070bf7798d86b
      size: 1245
    - path: reports/evidently_error.txt
      hash: md5
      md5: a869674cf454dbb533ff005c64dbad01
      size: 144
